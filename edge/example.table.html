<!DOCTYPE html>
<html lang="zh-Hans-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="description" content="LuLu UI edge主题中文文档，面向PC，也兼容移动端，非常适合对外用户web网站的UI框架，阅文集团前端团队荣誉出品。本页面文档内容关于表格解决方案">
<meta name="keywords" content="LuLu UI, 中文文档, UI框架, UI组件库, LuLu, Web, 前端, 表格解决方案">
<title>LuLu UI edge主题中文文档 &raquo; 表格解决方案</title>
<link rel="stylesheet" href="https://unpkg.com/lu2/theme/edge/css/common/animate.css">
<link rel="stylesheet" href="https://unpkg.com/lu2/theme/edge/css/common/ui.css">
<link rel="stylesheet" href="../edge/assets/css/mockup.css">
</head>
<body>
	<input id="asideCheck" type="checkbox" class="aside-checkbox"><label for="asideCheck" class="aside-label"><svg width="24" height="24"><use xlink:href="#icon-bars"></use></svg></label>
	<header class="header">
		<a href="../" accesskey="1" class="logo-a" data-theme="edge"><h1 class="logo">LuLu UI Edge版中文文档 &raquo; 表格解决方案</h1></a>
		<div class="header-right">
			<select id="selectTheme" class="select-theme" is="ui-select">
				<option value="peak">Peak主题</option>
			    <option value="pure">Pure主题</option>
			    <option value="edge" selected>Edge主题</option>
			</select>
			<a class="ui-button" data-type="success" href="https://www.zhangxinxu.com/sp/lulu/guide/edge/">教程</a>
			<a href="https://github.com/yued-fe/lulu" target="_blank" rel="noopener nofollow" class="github-a">
				<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
					<path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path>
				</svg>
			</a>
		</div>
	</header>

<style>
.et-operate {
    margin-right: 10px;
    margin-top: 10px;
    overflow: hidden;
}
.et-search {
    width: 220px;
    float: right;
}
a.dark:not([href]) {
    opacity: .4;
}

.table-x {
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
}

.table-null-x h4,
.table-null-x p {
    margin: 5px 0;
}

</style>
<div class="main">
    <!-- 主内容 -->
    <main class="section_main">
    	<h2 class="section_title">表格解决方案</h2>
        <!-- 详细内容 -->
        <article>
            <h3>安装与调用</h3>
            <p>引用下面CSS：</p>
            <pre>&lt;link rel="stylesheet" href="https://unpkg.com/lu2/theme/edge/css/common/ui/Table.css"&gt;
&lt;link rel="stylesheet" href="https://unpkg.com/lu2/theme/edge/css/common/comp/Table.css"&gt;</pre>
            <p>JS为：</p>
            <pre>&lt;script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/comp/Table.js"&gt;&lt;/script&gt;</pre>
            <p>或者：</p>
            <pre>&lt;script type="module"&gt;
    import "https://unpkg.com/lu2/theme/edge/js/common/comp/Table.js";
&lt;/script&gt;</pre>
            <p>本组件为内置自定义元素组件，如果需要兼容Safari浏览器，还需要引入下面的JS。</p>
            <pre>&lt;script src="https://unpkg.com/lu2/theme/edge/js/common/safari-polyfill.js"&gt;&lt;/script&gt;</pre>
            <p class="tips">由于此Polyfill执行了querySelectorAll匹配，因此Safari浏览器下，组件connetedCallback生命周期函数的执行时机比Chrome/Firefox浏览器靠后，因此，如果要兼容Safari浏览器，在执行参数设置的时候，可以在当前表格元素的DOMContentLoaded或connected回调中设置。详见本文档源代码。</p>

            <p>如果是npm安装调用，则：</p>
            <pre>import 'lu2/theme/edge/css/common/ui/Table.css';
import 'lu2/theme/edge/css/common/comp/Table.css';
import 'lu2/theme/edge/js/common/safari-polyfill.js';
import 'lu2/theme/edge/js/common/ui/Table.js';</pre>

            <p>如果 JS import语法报错，试试在业务代码中动态引入。</p>
            <pre>import('lu2/theme/edge/js/common/safari-polyfill.js');
import('lu2/theme/edge/js/common/ui/Table.js');</pre>

            <h3>使用is="ui-table"</h3>

            <p>本组件为动态列表解决方案，如果是静态列表，请访问“<a href="./apis.table.html">布局 » Table表格</a>”。</p>
            <p>本组件为Web Components组件，通过对原生<code>&lt;table&gt;</code>元素进行扩展实现。</p>
            <p>使用方法很简单，给<code>&lt;table&gt;</code>元素设置<code>is="ui-table"</code>即可。</p>
            <p>配合特定的HTML元素和参数，无需任何初始化，即可实现带交互的动态表格效果。</p>
            <pre>&lt;table <mark>is="ui-table"</mark>&gt;&lt;/table&gt;</pre>

            <p>内置的交互逻辑包括：</p>
            <ul>
                <li>数据请求</li>
                <li>模板渲染</li>
                <li>loading</li>
                <li>为空或出错提示</li>
                <li>分页</li>
                <li>分页数量设置</li>
                <li>全选反选</li>
                <li>表单筛选</li>
            </ul>

            <h4>1. 数据请求</h4>
            <p>列表数据请求的接口和参数可以使用以下方法设置：</p>
            <ul>
                <li>【推荐】使用关联form元素，这个可以参见后面的“综合交互案例演示”。</li>
                <li>在<code>&lt;table&gt;</code>元素上通过<code>data-url</code>属性指定请求的URL地址和参数。</li>
                <li><p>设置参数。</p><pre>table.setParams({
    ajax: {
        url: '',
        data: {}
    }
});</pre>
                <p>此参数为全局设置，任何请求都会使用这些参数。</p>
                <p><code>table.ajax()</code>方法也可以传递参数（同时请求新的数据），此参数则为临时参数。例如：</p>
                <pre>table.ajax({
    url: '',
    data: {}
});</pre>
                </li>
            </ul>

            <h4>2. 模板渲染</h4>
            <p>本组件内置一套模板渲染规则。</p>
            <p>列表渲染的模板使用HTML5 <code>&lt;template&gt;</code>元素，模板语法为原生的ES6的模板字符串语法，非常容易上手。</p>
            <p>模板语法仅支持表达式，并不支持<code>if...else</code>这类逻辑语句块，因此如果有逻辑判断，可以使用3元表达式实现。</p>
            <pre>${ flag ? `&lt;ele-a&gt;` : `&lt;ele-b&gt;` }</pre>
            <p>使用的时候，可以把<code>&lt;template&gt;</code>元素设置在<code>&lt;tbody&gt;</code>元素中，本组件会自动识别该模板元素。</p>

            <p>当然，您也可以使用自定义的模板渲染语法，或者自己拼接字符串，通过以下方法设置：</p>
            <pre>table.params.parse = function (json) {
    <span class="green">// json就是后台返回的JSON数据</span>
    <span class="green">// return的字符串内容会作为<code>&lt;tbody&gt;</code>元素的innerHTML</span>
};</pre>    
            <p>模板中的字符串内容可以使用下面代码获取：</p>
            <pre>table.params.template</pre>

            <h4>3. loading</h4>
            <p>当数据请求发生的时候，本组件会显示loading效果，这个loading效果是<code>&lt;ui-loading&gt;</code>元素实现的。</p>
            <p>如果列表上下文中没有<code>&lt;ui-loading&gt;</code>元素，本组件会自动创建，但是这样可能会出现页面布局突然变化的不好的体验，因此建议使用<code>&lt;ui-loading&gt;</code>元素进行占位，位置放在<code>&lt;table&gt;</code>元素的后面。</p>
            <pre>&lt;div class="table-x"&gt;
    &lt;table is="ui-table"&gt;&lt;/table&gt;
    <mark>&lt;ui-loading rows="15"&gt;&lt;/ui-loading&gt;</mark>
</pre>
            <p>当分页切换的时候，本组件会自动控制loading元素的显示与隐藏，以及尺寸大小。</p>

            <p>loading元素可以使用下面代码获取：</p>
            <pre>table.element.loading</pre>

            <h4>4. 为空或出错提示</h4>
            <p>本组件在请求没有数据或者出错的时候，会自动出现提示信息，默认是高度300px同时水平垂直居中的文字提示效果，效果如下所示：</p>
            <div class="table-x">
                <table is="ui-table"><thead><tr><th>文章标题</th></tr></thead></table>
                <div class="table-null-x" style="display: flex;">暂无数据</div>
            </div>
            <p>相关代码如下：</p>
            <pre>&lt;div class="table-x"&gt;
    &lt;table is="ui-table"&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;文章标题&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;/table&gt;
    <mark>&lt;div class="table-null-x" style="display: flex;"&gt;暂无数据&lt;/div&gt;</mark>
&lt;/div&gt;</pre>
            <p>通常情况下，我们无需关心出错提示的细节信息，但是，如果希望出错提示是非常精致的，例如有图标，则大家就可以提前写好出错提示信息，本组件会在出错或无数据时候自动显示。</p>
            <p>其中，无数据提示的容器元素需要类名是<code>table-null-x</code>，出错提示的的容器元素需要类名是<code>table-error-x</code>。</p>
            <p>在“综合交互案例演示”那里有相关示意。</p>

            <p>为空元素和出错提示元素可以使用下面代码获取：</p>
            <pre>table.element.empty;
table.element.error</pre>
                
            <h4>5. 分页</h4>
            <p>分页是可选的，如果不设置，列表是不会显示分页的。</p>
            <p>分页使用<code>&lt;ui-pagination&gt;</code>元素，位置任意，只要其祖先元素和<code>&lt;table&gt;</code>元素的父元素保持一致即可。</p>
            <p>例如：</p>
            <pre>&lt;div class="table-x"&gt;
    &lt;table is="ui-table"&gt;&lt;/table&gt;
    <mark>&lt;ui-pagination per="10"&gt;&lt;/ui-pagination&gt;</mark>
&lt;/div&gt;</pre>
            <p>如果列表中默认没有<code>&lt;ui-pagination&gt;</code>元素，则本组件会寻找类名为<code>table-page</code>的元素，并在其中创建<code>&lt;ui-pagination&gt;</code>元素。这个在“综合交互案例演示”那里有相关示意。</p>

            <p>分页元素可以使用下面代码获取：</p>
            <pre>table.element.pagination</pre>

            <p>本组件分页的总数需要后端反馈，也就是请求列表JSON数据的时候需要包含数据总量字段，默认是<code>total</code>，可以替换成其他。</p>
            <p>下面是本组件支持的分页总数数据结构：</p>
            <pre>{
    "error": 0,   <span class="green">// 或者"code": 0</span>
    "total": 50,
}</pre>
            <p>或者：</p>
            <pre>{
    "error": 0,    <span class="green">// 或者"code": 0</span>
    "data": {
        "total": 50,
        "data": []
    }
}</pre>
            <p>这样，本组件才能准确分页。以及，每次请求完毕，匹配选择器<code>output[data-type="total"]</code>的元素的内容都会变成分页总数的值。</p>

            <h4>6. 分页数量设置</h4>
            <p>分页数量设置也是可选的。</p>
            <p>分页数量设置使用<code>&lt;ui-drop&gt;</code>元素，同时需要设置<code>data-type="per"</code>，避免和其他<code>&lt;ui-drop&gt;</code>元素冲突。</p>
            <p>默认情况下，分页数量可以设置为<code>[15, 30, 50]</code>这3档，想要修改分页数量，可以使用下面的代码：</p>
            <pre>table.params.list = [10, 15, 20, 30];</pre>
            <p>例如下面的实时效果，点击数字可以看到列表项，页面刷新的时候会记住上一次的选择：</p>
            <div>
                <table id="tableDrop" is="ui-table" hidden></table><ui-drop data-type="per">15</ui-drop>
            </div>
            <p>这个案例演示代码如下（表格隐藏了）：</p>
            <pre>&lt;table id="tableDrop" is="ui-table" hidden&gt;&lt;/table&gt;
&lt;ui-drop data-type="per"&gt;15&lt;/ui-drop&gt;</pre>

            <p>分页数量下拉元素可以使用下面代码获取：</p>
            <pre>table.element.drop</pre>

            <h4>7. 全选反选</h4>
            <p>本组件集成了全选反选功能，可以实现批量操作。</p>
            <p>其中，复选框一定要设置在第一个<code>&lt;td&gt;</code>、<code>&lt;th&gt;</code>元素中，以及可以设置类名<code>table-checkbox</code>，对排版进行了一定的优化，代码示意：</p>
            <pre>&lt;div class="table-x <mark>table-checkbox</mark>"&gt;
    &lt;table is="ui-table"&gt;&lt;/table&gt;
&lt;/div&gt;</pre>
            <p>每次有复选框元素选中/取消选中行为发生的时候，都会触发自定义的<code>'check'</code>事件，例如：</p>
            <pre>table.addEventListener('check', function (event) {
    <span class="green">// 复选框点击会执行这里代码</span>
    let detail = event.detail;
});</pre>
            <p>其中<code>detail</code>对象包含下面这些参数：</p>
            <pre>{
    isAllChecked: true/false,
    isAllUnchecked: true/false,
    target: eleCheckbox,
    allEnabledCheckbox: [eleA, eleB, ...]
}</pre>
            <p>具体含义如下：</p>
            <dl>
                <dt>isAllChecked</dt>
                <dd>布尔值。表示是否全部选中。</dd>
                <dt>isAllUnchecked</dt>
                <dd>布尔值。表示是否全部未选中。</dd>
                <dt>target</dt>
                <dd>元素对象。表示当前点击的复选框元素。</dd>
                <dt>数组。表示列表中所有非禁用态的复选框元素。此参数在批量处理的时候很有用。</dt>
                <dd></dd>
            </dl>

            <h4>8. 表单筛选</h4>
            <p>这是本组件比较强大且重要的功能。</p>
            <p>本组件对<code>&lt;table&gt;</code>元素扩展了一个<code>form</code>属性，是的<code>&lt;table&gt;</code>元素可以和<code>&lt;input/button&gt;</code>等元素一样，直接<code>table.form</code>就可以返回关联的<code>&lt;form&gt;</code>元素。</p>
            <p>在实际开发者，复杂列表一定是和表单相关联的，例如搜索功能。</p>
            <p>在LuLu UI的体系下，你无需任何其他额外的JS设置，就可以完成和列表联动的搜索能力。</p>
            <p>关键点就是使用这里的<code>form</code>属性，把<code>&lt;table&gt;</code>元素的<code>form</code>属性值设置为对应的<code>&lt;form&gt;</code>元素的<code>id</code>值即可。例如：</p>
            <pre>&lt;form <mark>id="myForm"</mark> action="/get"&gt;
    &lt;input type="search" name="key"&gt;
&lt;/form&gt;
&lt;table is="ui-table" <mark>form="myForm"</mark>&gt;&lt;/table&gt;</pre>
            <p>此时，<code>&lt;form&gt;</code>元素的<code>action</code>地址就是接口请求的地址，<code>&lt;form&gt;</code>元素中的表单控件数据也会作为请求参数一起发送过去。</p>
            <p>例如，上面的HTML代码，最终的请求地址一定包含下面这部分：</p>
            <pre>/get?key=xxx</pre>
            <p>如果有分页，还会自动包含分页相关数据。</p>
            <p><code>&lt;form&gt;</code>元素自动内置了表单验证行为，当触发<code>submit</code>提交行为的时候，列表也会重新加载。</p>
            <p>可以使用下面的代码自定义的表单验证行为：</p>
            <pre><span class="green">// 语法详见Validate.js</span>
this.params.form.validate = [];</pre>
            <p>如果表单提交触发列表加载的时候希望传递额外的参数，可以：</p>
            <pre>this.params.form.data = { key: 'value' };</pre>
            <p>需要注意的是上面的参数在点击分页切换的时候是不会添加的，如果任意请求都需要传递某些参数，请使用下面的语法：</p>
            <pre>eleTable.params.ajax.data = { key: 'value' }</pre>

            <h3>纯展示案例演示</h3>

            <p>接下来演示的是简单的静态展示列表效果，无需任何额外的JavaScript代码进行初始化。</p>
            
            <div class="table-x">
                <table is="ui-table" data-url="https://www.zhangxinxu.com/sp/lulu/mockup/common/cgi/table.php">
                    <thead>
                      <tr>
                        <th>文章标题</th>
                        <th width="22%">发布时间</th>
                        <th width="15%">评论数</th>
                      </tr>
                    </thead>
                    <tbody>
                        <template>
                            ${ data.data.map(obj => {
                                return `<tr>
                                    <td>${obj.title}</div></td>
                                    <td>${obj.time}</td>
                                    <td>${obj.comment}</td>
                                </tr>`
                            }).join('') }
                        </template>
                    </tbody>
                </table>
                <!-- 列表加载loading -->
                <ui-loading rows="15"></ui-loading>
                <ui-pagination per="10"></ui-pagination>
            </div>

            <p>完整的HTML代码如下所示（注意：<strong>.table-x 类名是必须的</strong>）：</p>
            <pre>&lt;div class="table-x"&gt;
    &lt;table <mark>is="ui-table"</mark> <mark class="orange">data-url="/get"</mark>&gt;
        &lt;thead&gt;
            &lt;tr&gt;
            &lt;th&gt;文章标题&lt;/th&gt;
            &lt;th width="22%"&gt;发布时间&lt;/th&gt;
            &lt;th width="15%"&gt;评论数&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            <span class="green">&lt;!-- 模板 --&gt;</span>
            &lt;template&gt;
                ${ data.data.map(obj =&gt; {
                    return `&lt;tr&gt;
                        &lt;td&gt;${obj.title}&lt;/td&gt;
                        &lt;td&gt;${obj.time}&lt;/td&gt;
                        &lt;td&gt;${obj.comment}&lt;/td&gt;
                    &lt;/tr&gt;`
                }).join('') }
            &lt;/template&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    <span class="green">&lt;!-- 加载loading --&gt;</span>
    &lt;ui-loading rows="15"&gt;&lt;/ui-loading&gt;
    <span class="green">&lt;!-- 分页，每页10项 --&gt;</span>
    &lt;ui-pagination per="10"&gt;&lt;/ui-pagination&gt;
&lt;/div&gt;</pre>
                     
            <p>在本演示中，就是使用的<code>data-url</code>属性指定Ajax数据拉取的URL地址。</p>
            <p>分页的交互行为组件内置，使用的时候无需关心细节。</p>
            
            <h3>综合交互案例演示</h3>
            <p>本案例演示重点在分页与列表交互，复选框选中与列表交互，列表中动态内容的事件处理，以及外部的搜索、删除如何影响列表的显示。</p>

            <div class="ovh pt10 pb10">
                <!-- 表格右上区域，一般是搜索 -->
                <div class="et-search">
                    <form id="mixForm" action="https://www.zhangxinxu.com/sp/lulu/mockup/common/cgi/table.php">
                        <div class="table-search ui-input ui-input-search" align="end">
                            <input type="search" name="key" placeholder="搜error出错，其他随机" required>
                            <button type="submit" class="ui-icon-search">搜索</button>
                        </div>
                    </form>
                </div>
                <div class="et-operate">
                    <a id="btnDelComment" class="dark" title="演示返回数据为空的效果" is-tips><i class="icon_del"></i>删除文章</a>
                </div>
            </div>
            <div class="table-x table-checkbox">
                <table id="tableMix" is="ui-table" form="mixForm">
                    <thead>
                      <tr>
                        <th><input type="checkbox" is="ui-checkbox"></th>
                        <th>文章标题</th>
                        <th width="22%">发布时间</th>
                        <th width="15%" class="tr">评论数</th>
                        <th width="15%" class="tc">&nbsp;</th>
                      </tr>
                    </thead>
                    <tbody>
                        <template>
                            ${ data.data.map((obj, index) => {
                                return `<tr>
                                    <td><input type="checkbox" is="ui-checkbox"></div></td>
                                    <td>${obj.title}</div></td>
                                    <td>${obj.time}</td>
                                    <td>${obj.comment}</td>
                                    <td>${index ? `<a href="javascript:;" class="icon icon_del ui-tips" title="删除评论"></a>` : `<input type="checkbox" id="switch" is="ui-checkbox">`}</div></td>
                                </tr>`
                            }).join('') }
                        </template>
                    </tbody>
                </table>
                <!-- 列表无数据的占位-可选 -->
                <div class="table-null-x">
                    <img src="https://qidian.gtimg.com/lulu/theme/modern/css/common/images/temp/icon_exapmle_delete.png" width="69" height="80">
                    <h4>文章列表为空</h4>
                    <p>系统将在用户删除文章一个工作日后，<br>自动彻底清理</p>
                </div>
                <!-- 列表加载loading -->
                <ui-loading rows="15"></ui-loading>
                <!-- 底部分页 -->
                <div class="table-page-x">
                    <div class="table-page-data">
                        共<output class="table-page-total" data-type="total">0</output>篇文章, 每页显示<ui-drop class="table-page-per" data-type="per">15</ui-drop>
                    </div>
                    <!-- 这里面会显示分页 -->
                    <div class="table-page"></div>
                </div>
            </div>
            <h4>代码</h4>
            <h5>1. HTML代码</h5>
            <p>只要按照提供的特定的HTML结构书写，无需任何额外的JavaScript代码设置，列表就能正常显示。</p>
            <p>完整HTML如下所示，包括模板、关联表单、无数据、分页、分页数量设置、loading等：</p>
            <pre scrollable><span class="green">&lt;!-- 注意，此表单也是组件功能一部分 --&gt;</span>
&lt;form id="mixForm" action="/search"&gt;
    &lt;div class="table-search ui-input ui-input-search" align="end"&gt;
        &lt;input type="search" name="key" placeholder="搜error出错，其他随机" required&gt;
        &lt;button type="submit" class="ui-icon-search"&gt;搜索&lt;/button&gt;
    &lt;/div&gt;
&lt;/form&gt;
&lt;a id="btnDelComment" title="演示返回数据为空的效果" is-tips&gt;&lt;i class="icon_del"&gt;&lt;/i&gt;删除文章&lt;/a&gt;
<span class="green">&lt;!-- 列表部分 --&gt;</span>
&lt;div class="table-x table-checkbox"&gt;
    &lt;table id="tableMix" is="ui-table" form="mixForm"&gt;
        &lt;thead&gt;
          &lt;tr&gt;
            &lt;th&gt;&lt;input type="checkbox" is="ui-checkbox"&gt;&lt;/th&gt;
            &lt;th&gt;文章标题&lt;/th&gt;
            &lt;th width="22%"&gt;发布时间&lt;/th&gt;
            &lt;th width="15%" class="tr"&gt;评论数&lt;/th&gt;
            &lt;th width="15%" class="tc"&gt;&amp;nbsp;&lt;/th&gt;
          &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;template&gt;
                ${ data.data.map((obj, index) =&gt; {
                    return `&lt;tr&gt;
                        &lt;td&gt;&lt;input type="checkbox" is="ui-checkbox"&gt;&lt;/div&gt;&lt;/td&gt;
                        &lt;td&gt;${obj.title}&lt;/div&gt;&lt;/td&gt;
                        &lt;td&gt;${obj.time}&lt;/td&gt;
                        &lt;td&gt;${obj.comment}&lt;/td&gt;
                        &lt;td&gt;${index ? `&lt;a href="javascript:;" class="icon icon_del ui-tips" title="删除评论"&gt;&lt;/a&gt;` : `&lt;input type="checkbox" id="switch" is="ui-checkbox"&gt;`}&lt;/div&gt;&lt;/td&gt;
                    &lt;/tr&gt;`
                }).join('') }
            &lt;/template&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    <span class="green">&lt;!-- 列表无数据的占位-可选 --&gt;</span>
    &lt;div class="table-null-x"&gt;
        &lt;img src="delete.png"&gt;
        &lt;h4&gt;文章列表为空&lt;/h4&gt;
        &lt;p&gt;系统将在用户删除文章一个工作日后，&lt;br&gt;自动彻底清理&lt;/p&gt;
    &lt;/div&gt;
    <span class="green">&lt;!-- 列表加载loading --&gt;</span>
    &lt;ui-loading rows="15"&gt;&lt;/ui-loading&gt;
    <span class="green">&lt;!-- 底部分页 --&gt;</span>
    &lt;div class="table-page-x"&gt;
        &lt;div class="table-page-data"&gt;
            共&lt;output class="table-page-total" data-type="total"&gt;0&lt;/output&gt;篇文章, 每页显示&lt;ui-drop class="table-page-per" data-type="per"&gt;15&lt;/ui-drop&gt;
        &lt;/div&gt;
        <span class="green">&lt;!-- 这里面会显示分页 --&gt;</span>
        &lt;div class="table-page"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</pre>

            <p>如果对文案和样式没有特别高的要求，“列表无数据的占位”元素<code>.table-null-x</code>可以删除，到时候会显示“暂无数据”。</p>
            <p>如果你对样式要求不高，但对文案有要求，可以下面这样：</p>
            <pre>&lt;div class="table-null-x" style="dislay:none;"&gt;这里是你的文案&lt;/div&gt;</pre>

            <h5>2. 与交互行为相关的JS代码</h5>
            <p>列表中的事件和行为需要开发者自己绑定，当然，这里的列表解决方案也提供了一些可使用的自定义事件，例如下面代码中出现的<code>'check'</code>事件。</p>
            <pre scrollable><span class="green">// 列表综合实例交互代码示意</span>
var eleBtnDelete = document.getElementById('btnDelComment');
var eleTable = document.getElementById('tableMix');
<span class="green">// 列表中单复选框选中后的状态处理</span>
eleTable.addEventListener('check', function (event) {
    let detail = event.detail;
    if (detail.isAllUnchecked) {
        eleBtnDelete.removeAttribute('href');
    } else {
        eleBtnDelete.setAttribute('href', 'javascript:');
    }
});

<span class="green">// 列表删除事件演示
// 需要走委托才行</span>
eleTable.addEventListener('click', function (event) {
    if (event.target.matches('a.icon_del')) {
        new Dialog().confirm('确认删除该评论？');
    }
});

<span class="green">// 删除全部评论</span>
eleBtnDelete.addEventListener('click', function () {
    if (!this.hasAttribute('href')) {
        return;
    }

    new Dialog().confirm('确认删除选中的这些评论？', {
        buttons: [{
            value: '删除',
            events: function (event) {
                eleTable.ajax({
                    data: {
                        action: 'empty'
                    },
                    success: function () {
                        eleBtnDelete.removeAttribute('href');
                    }
                });
                event.dialog.remove();
            }
        }, {}]
    });
});

<span class="green">// 如果表单提交触发的分页内容更新希望添加额外的查询字段，可以使用下面语法</span>
eleTable.params.form.data = {
    type: 'submit'
};
<span class="green">// 下面代码示意的是搜索内容有值，新增一个action查询字段
// 这个逻辑是方便测试用的，实际开发不需要这个，后台可以判定</span>
eleTable.form.addEventListener('input', function () {
    if (!eleTable.params.ajax.data) {
        eleTable.params.ajax.data = {};
    }
    if (this.querySelector('input[type="search"]').value.trim()) {
        eleTable.params.ajax.data.action = 'search';
    } else {
        delete eleTable.params.ajax.data.action;
    }
});</pre>
            
            <h3>语法和参数</h3>
            
            <p>已知：</p>
            <pre>let myTable = document.querySelector('table[is="ui-table"]');</pre>

            <p>则所有的参数设置均围绕<code>myTable</code>展开。</p>

            <p><code>myTable</code>暴露了以下属性和方法：</p>
            <pre>{
    element: {
        <span class="green">// 分页下拉元素，可能不存在</span>
        drop: null,
        <span class="green">// 分页元素，可能不存在</span>
        pagination: null,
        <span class="green">// 分别是：为空提示元素，loading元素，出错提示元素</span>
        loading: null,
        empty: null,        
        error: null,
    },
    params: {
        <span class="green">// 分页数据</span>
        page: {},
        <span class="green">// 请求数据</span>
        ajax: {},
        <span class="green">// 表单数据</span>
        form: {},
        <span class="green">// 分页数列表数据</span>
        list: []
    },
    <span class="green">// 参数设置</span>
    setParams: (options) => {},
    <span class="green">// 刷新列表</span>
    <strong>ajax</strong>: (options) => {}
}</pre>

            <p>其中，<code>myTable.element</code>只读，<code>myTable.params</code>可读写，相关参数具体语法如下：</p>
            
            <h4>参数</h4>
            <table width="100%" class="ui-table">
              <tr>
                <th width="60">参数名称</th>
                <th width="60">支持类型</th>
                <th width="110">默认值</th>
                <th>释义</th>
              </tr>

              <tr>
                <td>ajax</td>
                <td>Object</td>
                <td>{}</td>
                <td>Ajax请求参数。支持下面这些参数。
                    <dl>
                        <dt>url</dt>
                        <dd>必需。String。Ajax请求地址。</dd>
                        <dt>data</dt>
                        <dd>可选。Object|<wbr>Function。<wbr>Ajax请求附带参数，支持Function类型，适合需要发送实时数据的场景。</dd>
                        <dt>success</dt>
                        <dd>可选。Function。<wbr>Ajax成功的回调，支持一个参数，为后端返回的JSON对象。</dd>
                        <dt>error</dt>
                        <dd>可选。Function。<wbr>Ajax失败的回调，请求成功但返回错误码也会触发。</dd>
                        <dt>complete</dt>
                        <dd>可选。Function。<wbr>Ajax完成的回调，无论成功失败都会触发。</dd>
                    </dl>
                </td>
              </tr>
              <tr>
                <td>page</td>
                <td>Object</td>
                <td>{<small class="gray">/*见释义*/</small>}</td>
                <td>分页相关的一些参数。
<p>默认值如下：</p>
<pre>{
  <span class="green">// 总数据量</span>
  total: 0,
  <span class="green">// 每页数目</span>
  per: 15,
  <span class="green">// 当前页数</span>
  current: 1
  <span class="green">// 接口映射关系</span>
  keyMap: {
    key: '',
    total: 'total',
    per: 'per',
    current: 'current'
  }
}</pre>
                    参数<code>keyMap</code>用来指定LuLu UI分页字段和后端分页字段的映射关系，例如后端返回分页信息如下：<pre>{
  "code": 0,
  "data": {
    "page<wbr>Info": {
      "page<wbr>Index": 1,
      "page<wbr>Size": 20,
      "page<wbr>Max": 6,
      "total<wbr>Count": 99
    }
  }
}</pre>
<p>则此时，keyMap参数设定为：</p>
<pre>keyMap: {
  key: 'page<wbr>Info',
  total: 'total<wbr>Count',
  per: 'page<wbr>Size',
  current: 'page<wbr>Index'
}</pre>
<p>可以看出参数<code>key</code>表示后台返回JSON数据中分页数据的父字段名称。如果父字段名称是<code>data</code>，则<code>key</code>的值为空字符串即可。</p></td>
              </tr>
              <tr>
                <td>form</td>
                <td>Object</td>
                <td>{}</td>
                <td>Form表单请求和验证参数。
                    <dl>
                        <dt>data</dt>
                        <dd>可选。Object|<wbr>Function。<wbr>表单submit请求时附带的参数，注意，点击分页时候，此参数不会被发送。</dd>
                        <dt>validate</dt>
                        <dd>可选。Array|<wbr>Object。额外的表单验证逻辑，同“<a href="./apis.validate.html">Validate表单验证</a>”组件中的<code>validate</code>参数。</dd>
                    </dl>
                </td>
              </tr>
              <tr>
                <td>list</td>
                <td>Array</td>
                <td>[15,<wbr>30,<wbr>50]</td>
                <td>分页下拉的列表数据。</td>
              </tr>
              <tr>
                <td>parse</td>
                <td>Func<wbr>tion</td>
                <td>{<small class="gray">/*见释义*/</small>}</td>
                <td>对Ajax返回的数据进行解析，并返回对应列表的HTML字符串，如果没有数据，返回空字符串。<p>支持一个参数，为后端返回的最原始的JSON数据对象。</p><p>默认值如下：</p>
                <pre>(json) => {
    if (this.params.template) {
        return this.params.template.interpolate(json);
    }

    return '';
}</pre>         
                    <p class="tips">本组件对所有字符串扩展了一个名为<code>interpolate</code>的方法，可以对ES6模板字符串语法进行渲染，详见<a href="https://www.zhangxinxu.com/wordpress/?p=9607" target="_blank">这篇文章</a>，可以满足绝对大多数的模板渲染开发需求。</p>
                </td>
              </tr>
            </table>

            <p>参数设置有如下方法：</p>
            <ol>
                <li>直接设置，例如：<pre>myTable.params.parse = otherFun;
myTable.params.ajax.url = '/someUrl';</pre></li>
                <li>使用<code>setParams()</code>方法，例如：<pre>myTable.setParams({
    parse: otherFun,
    ajax: {
        url: '/someUrl'
    }
});</pre></li>
            </ol>

            <p>如果参数设置完毕，希望列表立即刷新，可以执行<code>ajax()</code>方法，例如：</p>
            <pre>myTable.ajax();</pre>

            <p><code>ajax()</code>方法支持一个可选参数，表示请求的参数，参数类型同<code>myTable.params.ajax</code>，这里不在赘述，例如：</p>
            <pre>myTable.ajax({
    data: {
        key: 'newValue',
        success: function () {
            console.log('请求成功');
        }
    }                
});</pre>
            <p>myTable还支持如下两个自定义事件。</p>
            <table width="100%" class="ui-table" is="ui-table">
                <tr>
                  <th width="150">事件名称</th>
                  <th>释义</th>
                </tr>
                <tr>
                    <td>DOMContent<wbr>Loaded</td>
                    <td>当表格元素初始化完毕的时候执行。</pre></td>
                </tr>
                <tr>
                    <td>connected</td>
                    <td>当自定义表格元素和页面建立连接的时候执行。</pre></td>
                </tr>
            </table>

            <div class="contributors">
                <svg><use xlink:href="#icon-persons"></use></svg> <h6 class="contributors-h">本页贡献者：</h6><p id="contributorsP" class="contributors-p">zhangxinxu</p>
            </div>
        </article>
    </main>
    <!-- 侧边栏 -->
    <!-- 侧边栏 -->
<aside id="aside" class="aside">
    <div class="aside_main">
    	<dl class="aside_dl">
        	<dt class="aside_dt">关于</dt>
            <dd><a href="./about.design.html" class="aside_nav "><i class="icon icon_nav_msg"><svg><use xlink:href="#icon-maxcdn"></use></svg></i>命名与设计</a></dd>
            <dd><a href="./about.use.html" class="aside_nav "><i class="icon icon_nav_set"><svg><use xlink:href="#icon-wrench"></use></svg></i>使用与发布</a></dd>
        </dl>
        <dl class="aside_dl">
            <dt class="aside_dt">全局</dt>
            <dd><a href="./apis.colour.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-delicious"></use></svg></i>颜色与变量</a></dd>
        </dl>
        <dl class="aside_dl">
            <dt class="aside_dt">布局</dt>
            <dd><a href="./apis.table.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-table"></use></svg></i>Table表格</a></dd>
        </dl>
        <dl class="aside_dl">
            <dt class="aside_dt">控件</dt>
            <dd><a href="./apis.button.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-caret-square-o-right"></use></svg></i>Button按钮</a></dd>
            <dd><a href="./apis.input.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-tasks"></use></svg></i>Input文本框</a></dd>
            <dd><a href="./apis.textarea.html" class="aside_nav "><i class="icon icon_nav_ux"><svg><use xlink:href="#icon-square-o"></use></svg></i>Textarea文本域</a></dd>
            <dd><a href="./apis.placeholder.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-product-hunt"></use></svg></i>Placeholder占位符</a></dd>
            <dd><a href="./apis.checked.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-check-square"></use></svg></i>Radio/Checkbox框</a></dd>
            <dd><a href="./apis.switch.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-toggle-on"></use></svg></i>Switch开关</a></dd>
            <dd><a href="./apis.progress.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-ellipsis-h"></use></svg></i>Progress进度</a></dd>
        </dl>
        <div class="aside_divide"></div>
        <dl class="aside_dl">
            <dd><a href="./apis.select.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-bars"></use></svg></i>Select下拉框</a></dd>
            <dd><a href="./apis.range.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-sliders"></use></svg></i>Range范围选择</a></dd>
            <dd><a href="./apis.color.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-eyedropper"></use></svg></i>Color颜色选择</a></dd>
            <dd><a href="./apis.datetime.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-calendar"></use></svg></i>DateTime日期选择</a></dd>
            <dd><a href="./apis.datalist.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-list"></use></svg></i>Datalist数据列表</a></dd>
        </dl>
        <div class="aside_divide"></div>
        <dl class="aside_dl">
            <dt class="aside_dt">组件</dt>
            <dd><a href="./apis.loading.html" class="aside_nav "><i class="icon icon_nav_reply"><svg><use xlink:href="#icon-spinner"></use></svg></i>Loading效果</a></dd>
            <dd><a href="./apis.dialog.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-external-link"></use></svg></i>Dialog弹框</a></dd>
            <dd><a href="./apis.tips.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-bell"></use></svg></i>Tips/ErrorTip提示</a></dd>
            <dd><a href="./apis.lighttip.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-bolt"></use></svg></i>LightTip轻提示</a></dd>
            <dd><a href="./apis.pagination.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-stack"></use></svg></i>Pagination分页</a></dd>
            <dd><a href="./apis.drop.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-dropbox"></use></svg></i>Drop下拉们</a></dd>
            <dd><a href="./apis.validate.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-check-square-o"></use></svg></i>Validate表单验证</a></dd>
            <dd><a href="./apis.tab.html" class="aside_nav "><i class="icon icon_nav_user"><svg><use xlink:href="#icon-tags"></use></svg></i>Tab切换们</a></dd>
        </dl>

        <dl class="aside_dl">
            <dt class="aside_dt">综合实例</dt>
            <dd><a href="./example.table.html" class="aside_nav active"><i class="icon icon_nav_menu"><svg><use xlink:href="#icon-list-alt"></use></svg></i>表格解决方案</a></dd>
            <dd><a href="./example.form.html" class="aside_nav "><i class="icon icon_nav_source"><svg><use xlink:href="#icon-wpforms"></use></svg></i>表单解决方案</a></dd>
        </dl>
    </div>
</aside>
<script>(function () {
    // 记住滚动位置
    var eleAside = document.getElementById('aside');

    eleAside.addEventListener('click', function () {
        sessionStorage.asideScrollTop = this.scrollTop;
    });

    eleAside.scrollTop = sessionStorage.asideScrollTop;
    // IE这里设置可能没有用
    if (eleAside.scrollTop != sessionStorage.asideScrollTop) {
        setTimeout(function () {
            eleAside.scrollTop = sessionStorage.asideScrollTop;
        }, 1);
    }

    // 滚动条设置判断
    var div = document.createElement('div');
    div.style.width = '100px';
    div.style.height = '100px';
    div.style.overflow = 'auto';
    div.style.position = 'absolute';
    div.style.left = '-199px';
    var p = document.createElement('p');
    p.style.height = '120px';
    p.innerHTML = 'haha';
    div.appendChild(p);
    document.body.appendChild(div);
    if (p.clientWidth != 100) {
        eleAside.className += ' scrollbar';
    }
    document.body.removeChild(div);
})();
</script>
</div>

<a href="#" id="backtop" class="backtop"></a>

<script src="https://unpkg.com/lu2/theme/edge/js/common/ui/Keyboard.js"></script>
<script src="https://unpkg.com/lu2/theme/edge/js/common/safari-polyfill.js"></script>
<script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/ui/Select.js"></script>
<script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/ui/Drop.js"></script>
<!-- 底部 -->
<script src="../edge/assets/js/mockup.js"></script>
</body>
</html>

<script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/ui/Dialog.js"></script>
<script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/ui/ErrorTip.js"></script>
<script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/ui/Validate.js"></script>
<script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/ui/Tips.js"></script>
<script type="module" src="https://unpkg.com/lu2/theme/edge/js/common/comp/Table.js"></script>

<script>
// 分页下拉设置示意
let eleTableDrop = document.getElementById('tableDrop');
if (eleTableDrop && eleTableDrop.params) {
    eleTableDrop.params.list = [10, 15, 20, 30];
}

// 列表综合实例
var eleBtnDelete = document.getElementById('btnDelComment');
var eleTable = document.getElementById('tableMix');
// 列表中单复选框选中后的状态处理
eleTable.addEventListener('check', function (event) {
    let detail = event.detail;
    if (detail.isAllUnchecked) {
        eleBtnDelete.removeAttribute('href');
    } else {
        eleBtnDelete.setAttribute('href', 'javascript:');
    }
});

// 列表删除事件演示
// 需要走委托才行
eleTable.addEventListener('click', function (event) {
    if (event.target.matches('a.icon_del')) {
        new Dialog().confirm('确认删除该评论？');
    }
});

// 删除全部评论
eleBtnDelete.addEventListener('click', function () {
    if (!this.hasAttribute('href')) {
        return;
    }

    new Dialog().confirm('确认删除选中的这些评论？', {
        buttons: [{
            value: '删除',
            events: function (event) {
                eleTable.ajax({
                    data: {
                        action: 'empty'
                    },
                    success: function () {
                        eleBtnDelete.removeAttribute('href');
                    }
                });
                event.dialog.remove();
            }
        }, {}]
    });
});

// 兼容Safari，如果无需兼容Safari，直接执行connected中的代码即可
eleTable.addEventListener('connected', function () {
    // 如果表单提交触发的分页内容更新希望添加额外的查询字段，可以使用下面语法
    this.params.form.data = {
        type: 'submit'
    };
    // 下面代码示意的是搜索内容有值，新增一个action查询字段
    // 这个逻辑是方便测试用的，实际开发不需要这个，后台可以判定
    this.form.addEventListener('input', function () {
        if (!eleTable.params.ajax.data) {
            eleTable.params.ajax.data = {};
        }
        if (this.querySelector('input[type="search"]').value.trim()) {
            eleTable.params.ajax.data.action = 'search';
        } else {
            delete eleTable.params.ajax.data.action;
        }
    });
});
// Chrome浏览器此时是不会触发connected事件的，因此，手动执行下
if (eleTable.form) {
    eleTable.dispatchEvent(new CustomEvent('connected'));
}
</script>
